<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8>
    <title>AFrame</title>
    <link rel="stylesheet" type="text/css" href="styles/main.css">
    <link rel="stylesheet" type="text/css" href="styles/menu.css"> 
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>

    <!-- development version, includes helpful console warnings -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<body>
    <script src="libs/papaparse.min.js"></script>
    <script src="js/earth-viewer/user-position.js"></script>
    <script src="js/earth-viewer/callbackHelper.js"></script>
    <script src="js/turf/v2.0.2/turf.min.js"></script>
    <script src="js/controls/aframe-orbit-controls.js"></script>
    <script src="js/controls/vive-wasd-controls.js"></script>
       
    <div class="ui menubar-collapsed" id="menubar">
        <div class="menubar-container" onclick="closeMenu()">
                <div class="menubutton isactive">
                    <div class="upperbar"></div>
                    <div class="middlebar"></div>
                    <div class="lowerbar"></div>
                </div>
                <nav>
                    <ul>
                        <li class="menu-item-active">Explore Map</li>
                        <li class="menu-item">Visualization</li>
                        <li class="menu-item">Settings</li>
                    </ul>
                </nav>
        </div>
    </div>

    <div class="ui">
        <div>
            <form id="searchbar">
                <div class="search-container">
                    <button id="menu" type="button" onclick="openMenu()"></button>
                    <input id="textinput" type="text" name="searchbox" placeholder="Search location">
                </div>
            </form>
            

            <div id="search-results">
                <ul>
                    <li>
                        <span class="result-name">Vienna</span>
                        <span class="delimiter">•</span>
                        <span class="result-city">Austria</span>
                    </li>
                    <li>
                        <span class="result-name">Vienna</span> 
                        <span class="delimiter">•</span>
                        <span class="result-city">Austria</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- stats -->
    <a-scene>
        <a-entity 
            id="camera-rig"
        >
        <!-- vive-wasd-controls="enabled: false" -->
            <!-- Left controller / Controls the camera -->
            <a-entity
                id="left-controller"
                laser-controls="hand: left"
            >
            <!--laser-controls="hand: left" -->

            <!-- Right controller / Navigation of map-->
            <a-entity
                laser-controls="hand: right"
                id="right-controller"
                line="color: blue; opacity: 0.75" 
            >
                <a-cursor color="lavender" opacity="0.5"></a-cursor>
            </a-entity>

            <a-entity
                id="camera"
                camera="far: 100000000; near: 0.05; fov: 75"
                look-controls="enabled: false"
                vive-wasd-controls="enabled: true; cameraRigIdentifier: camera-rig"
                orbit-controls="target: 0 0 0; initialPosition: 0 0 6378000; enabled: true"
            > 
            <!---->
            </a-entity>
        </a-entity>          
        <a-sky color="#000914" radius="10000000"></a-sky>
    </a-scene>

    <!-- Adds coordinate axis system to the earth for orientation-->
    <script>
        var R = 6378.137;
        var scene = document.querySelector('a-scene').object3D;
        let grid = new THREE.GridHelper()
        let axesHelper = new THREE.AxesHelper(R * 1000);
        let gridHelper = new THREE.GridHelper(R * 1000);
        scene.add(axesHelper);
        scene.add(gridHelper);

        function closeMenu() {
            const menubar = document.querySelector('#menubar');
            menubar.classList.add('menubar-collapsed');
        }

        function openMenu() {
            const menubar = document.querySelector('#menubar');
            menubar.classList.remove('menubar-collapsed');
        }
    </script>
    
    <script type="module" src="js/earth-viewer/earth-launch.js"></script>
</body>

</html>
