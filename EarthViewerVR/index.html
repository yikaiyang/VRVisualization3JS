<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>EarthViewer</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=Heebo" rel="stylesheet">
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDK7Vp__eSf3moyboIE6vg6Plwn4KV-eHY&libraries=places"></script>

        <script src="/dist/build-aframe.js"></script>

        <!--Load these files before initializing controls. Controls need access to provided datastructures-->
        <script src="./src/3d/earthviewer/user-position.js"></script>
        <!--End-->

        <script src="./src/3d/controls/vive-wasd-controls.js"></script>
        <script src="./src/3d/controls/aframe-orbit-controls.js"></script>
    </head>

    <body>
    <div id="app" class="ui"></div>
    <script src="/dist/build-app.js"></script>

    <script>
        function closeMenu() {
            const menubar = document.querySelector('#menubar');
            menubar.classList.add('menubar-collapsed');
        }
        function openMenu() {
            const menubar = document.querySelector('#menubar');
            menubar.classList.remove('menubar-collapsed');
        }
    </script>


    <!-- Aframe -->
    <a-scene stats>
        <a-entity 
            id="camera-rig"
        >
        <!-- vive-wasd-controls="enabled: false" -->
        <!-- Left controller / Controls the camera -->
        <a-entity
            id="left-controller"
            laser-controls="hand: left"
        >
        </a-entity>

        <!-- Right controller / Navigation of map-->
        <a-entity
            laser-controls="hand: right"
            id="right-controller"
            line="color: blue; opacity: 0.75" 
        >
            <a-cursor color="lavender" opacity="0.5"></a-cursor>
        </a-entity>
          
          <!-- This apparently does not work since Aframe elements are culled in a lower distance than three js elements?-->
          <!-- <a-sphere position="0 0 -6370000" radius="6370000" color="#EF2D5E"></a-sphere> -->

        <a-entity
            id="camera"
            camera="far: 100000000; near: 0.05; fov: 75"
            look-controls="enabled: false"
            vive-wasd-controls="enabled: true; cameraRigIdentifier: camera-rig"
            orbit-controls="target: 0 0 0; initialPosition: 0 0 6378000; enabled: true" 
        >
        </a-entity>

        <!--VR Billboard -->
        <a-entity 
            id="vr-billboard"
            geometry="primitive: plane; width: 800; height: 320" 
            material="src: #billboard-canvas"
            rotation="-5 0 0" 
            position="0 -500 -800"
        >
        </a-entity>

        <a-sky color="#000914" radius="10000000"></a-sky>
    </a-scene>

    <!-- Adds coordinate axis system to the earth for orientation-->
    <script>
        var R = 6378.137;
        var scene = document.querySelector('a-scene').object3D;
        let grid = new THREE.GridHelper()
        let axesHelper = new THREE.AxesHelper(R * 1000);
        let gridHelper = new THREE.GridHelper(R * 1000);
        scene.add(axesHelper);
        scene.add(gridHelper);
    </script>


  </body>
</html>